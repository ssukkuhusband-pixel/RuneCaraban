# QA 체크리스트 - 다키스트 슬롯던전

## 방향 / 스케일
- 세로 모드에서 가로 회전 안내 오버레이가 표시된다.
- 스테이지가 `844x390` 비율을 유지하며 스케일된다.

## 레이아웃 안정성
- 하단 슬롯 바가 전장/로그 영역을 덮지 않는다.
- 보상 모달은 전투 레이어 위 최상단에서 가독성을 유지한다.
- 로그/사이드 목록은 내부 스크롤로 동작하며 전체 레이아웃을 밀지 않는다.
- 전장 배경이 전투 화면 전체를 채우고 상단 HUD가 오버레이로 보인다.
- 런 보드 대신 좌측 상단에 `특성/유물` 아이콘 오버레이만 표시된다.
- 전투 로그가 캐릭터 라인 하단 고정 영역에 표시되고, 슬롯 입력 영역과 겹치지 않는다.
- 슬롯 3칸이 하단 중앙 정렬이며 `회전` 버튼이 하단에 배치된다.
- 유닛 정보 텍스트(체력 수치/포지션/역할)가 카드에서 제거되고, `체력바-초상-게이지` 구조로 보인다.
- 유닛 카드에서 체력바와 별도의 보호막 게이지가 분리되어 표시된다.
- 전투 중 말풍선 대사가 유닛/로그/UI와 과도하게 겹치지 않고 읽을 수 있다.

## 핵심 규칙 가독성
- `회전` 입력 직후 룬 3개가 자동 해석된다.
- 룬 의미를 즉시 이해할 수 있다.
  - 영웅 룬(영웅 초상 심볼) → 해당 영웅 행동
  - 꽝 룬(🪨) → 랜덤 아군 1명 낙석 피해
- 룬에 부착된 표식(`x2`, `↺`, `★`)이 릴 UI에서 확인되고 실제 해석 순서/횟수에 반영된다.
- 룬에 부착된 확장 표식(`▲`, `∞`, `⧉`, `🧬`, `✶+`, `⇉`, `Ⅱ`, `◆`)이 릴 UI에서 확인되고 실제 위력/추가 발동/변환에 반영된다.
- 리롤 표식은 한 턴에 최대 1회만 발동하고, 발동 시 좌측부터 재해석된다.
- 메아리 표식은 동일 심볼을 60% 위력으로 1회 추가 발동한다.
- 확장 릴 특성 획득 시 스핀 결과에 보너스 릴(`+`)이 로그로 표시되고 추가 해석이 실행된다.
- 연쇄 고리(`⇉`) 표식은 다음 심볼 선행 발동을 유발하고, 전투 로그에서 식별 가능해야 한다.
- 각성 문장(`◆`) 발동 시 해당 영웅 카드에 문장 오라가 표시되고 2턴 후 해제된다.
- 기본 단일 타겟이 전열(가장 앞 대상) 기준으로 동작한다.
- 영웅/적의 개별 타겟 규칙(후열/저체력 등)이 카드 정보와 실제 타격 대상에 일치한다.
- 전투 불능 영웅 룬이 낮은 확률로 계속 등장하는지 확인한다.
- `추모 정렬(🪦)` 스킬 획득 시 전투불능 영웅 심볼 등장 빈도가 감소하는지 확인한다.
- 상단 `연계` 배율이 턴 내 해석 순서에 따라 상승한다.
- 상단 `턴 보너스` pill이 룬 시너지 결과를 올바르게 표시한다.
- 전투 불능 아군 수에 따른 공격 보정이 규칙 문구와 실제 수치에 반영된다.
- 룬 시너지(쌍룬/삼중/연계 진형/낙석 혼선)가 로그와 전투 수치에 반영된다.
- 영웅 카드의 궁극기 게이지가 행동 후 누적되고 100% 도달 시 준비 상태로 보인다.
- 궁극기 발동 후 게이지가 0%로 초기화된다.
- 궁극기 발동 시 필살기 컷인(영웅명/역할 표기)과 전장 톤 전환, 대상 강조 연출이 정상 표시된다.
- 캐릭터 대사가 항상 뜨지 않고 상황별 확률로만 표시된다.
- 캐릭터별 성격(진지/코믹/분노/차분)에 맞는 말투가 구분된다.
- 상황 맞춤 대사(전투 시작/공격/치명타/궁극기/저체력/처치/격노)가 해당 이벤트에 연동된다.
- 스핀 대기(`spin_ready`) 상태에서 4~8초 간격으로 감정형 대사가 표시된다.
- 근접 유닛 공격 시 타겟 앞까지 돌진 후 복귀하는 연출이 동작한다.
- 원거리 유닛 공격 시 투사체 트레일이 타겟까지 날아가며 피격 버스트/쇼크웨이브가 표시된다.
- 영웅/적의 광역 마법 판정 공격은 가로 투사체 대신 피격 대상별 세로 낙하형 이펙트로 표시된다.
- 원거리/근접 타격 직전에 타겟 고정 마커(링/십자)가 표시되어 피격 대상을 즉시 식별할 수 있다.
- 영웅/적에 따라 공격 속도/임팩트 강도가 구분되어 손맛 차이가 체감된다.
- 상태효과(표식/화상/약화/재생/가드)가 로그/피해/회복에 반영된다.
- 상태효과가 턴 경과에 따라 감소/해제되고, 유닛 카드 상태 아이콘에 동기화된다.

## 적 의도 시스템
- 적 카드에 의도(아이콘/명칭/예상 피해)가 표시된다.
- 적 턴 종료 후 의도가 갱신되어 다음 턴에 반영된다.
- 보스 체력 50% 이하 진입 시 격노 상태(공격/보호막/시각 강조)가 적용된다.

## 노드 변주 시스템
- 한 챕터가 총 10개 스테이지(노드)로 진행되고, 10번째 스테이지가 보스로 동작한다.
- 상단 노드 표시에 현재 노드 타입(전투/정예/휴식/보스)이 표시된다.
- 정예 노드에서 적 강화/보너스 결정 지급이 적용된다.
- 휴식 노드 진입 시 전투 대신 캠프 선택 모달이 표시된다.
- 휴식 선택 후 다음 전투 노드로 정상 전환된다.

## 유물 시스템
- 보상 카드에 유물 선택지가 포함될 수 있다.
- 유물 획득 시 사이드 `유물` 리스트에 즉시 반영된다.
- 유물 효과(피해/에너지/전투 시작 보호막)가 전투 수치에 반영된다.
- 동일 유물이 중복으로 제시되지 않는다.

## 수집 + 로그라이트 흐름
- 메인 로비 챕터 패널에서 현재 챕터명이 노출되고 좌/우 화살표로 변경된다.
- 선택한 챕터로 `입장` 버튼 진입 시 해당 챕터 난이도가 적용된다.
- 런 시작 전 메타 화면에서 출전 편성(최대 4명)을 선택할 수 있다.
- 영웅 정보 화면이 좌측(스탯/스킬) · 중앙(영웅/장비 아이콘) · 우측(영웅 목록) 3열 구조로 표시된다.
- 영웅 상세 화면에 `일반공격/궁극기` 설명 카드가 노출된다.
- 중앙 장비 아이콘 터치 시 장비 상세/교체 팝업이 열리고 장착 결과가 즉시 반영된다.
- 장착된 장비 슬롯 아이콘에 장비 이름이 함께 노출된다.
- 장비 교체 팝업 목록에서 다른 영웅이 이미 장착 중인 같은 슬롯 장비가 노출되지 않는다.
- 장비 슬롯/장비 교체 팝업/장비 뽑기 결과에서 생성된 장비 이미지 아이콘이 노출된다(없으면 이모지 폴백).
- 출전 영웅의 편성 위치(후열↔전열) 변경이 가능하고 실제 전장 배치/타겟 우선순위에 반영된다.
- 런 시작 시 선택한 편성 영웅으로 전투가 시작된다.
- 런 보상은 영입 없이 특성/유물 중심 3지선다로 제공된다.
- 보상 스킬 풀은 `심볼 관련`, `슬롯 관련`, `영웅 전용 잠재능력` 3축으로만 구성되는지 확인한다.
- 단순 스탯 증가형 카드(공격+N, 치명+N%)가 보상 카드에 노출되지 않는지 확인한다.
- 스핀 특화 스킬(`x2 표식`, `리롤 표식`, `과충전 표식`, `메아리 표식`, `특수 심볼`, `확장 릴`, `선두 복제`, `꽝 정화`, `룬 각인`, `연쇄 고리`, `2번 슬롯 공명`, `각성 문장`, `추모 정렬`)이 등장하고 스핀 결과에 반영된다.
- 보상 3지선다에서 동일 축 카드가 과도하게 중복 노출되지 않는지 확인한다.
- 보상 3지선다에서 이미 획득한 동일 특성이 반복 노출되지 않도록 제어되는지 확인한다.
- 정예/후반 노드에서 프리미엄 보상 카드가 가끔 등장하는지 확인한다.

## 밸런스 점검
- 전투 시작 시 기본 보호막(+3)이 적용되는지 확인한다.
- 직업별 기본 스탯 보정(공격형 공격↑, 수호형 체력↑ 등)이 실제 전투 스탯에 반영되는지 확인한다.
- 등급별 기본 스탯 보정(R < SR < SSR)이 실제 전투 스탯에 반영되는지 확인한다.
- 챕터 1/2/3에서 적 체력/공격 배율이 의도대로 점진 상승하는지 확인한다.
- 노드/정예/클리어/후퇴 보상량이 조정값으로 지급되는지 확인한다.
- 보상 모달은 항상 선택 가능한 3개 선택지를 제공한다.
- 보상 카드 선택 시 시각 강조(선택 애니메이션) 후 적용된다.
- 잠재능력 보상 획득 후 해당 영웅의 전투 연출/효과가 즉시 강화되는지 확인한다.

## 메타 시스템
- 로비 화면에서 유산 결정 보유량/단련 레벨/강화 비용이 보인다.
- 유산 결제로 강화 구매 시 다음 런 초기 스탯에 반영된다.
- 전투 종료 시 이번 런 획득 유산 결정이 표시된다.
- 브라우저 새로고침 후에도 유산 결정/단련 레벨이 유지된다.
- 뽑기 패널의 `SR+ 보장까지 N회` 카운트가 소환 결과에 따라 정상 증감/초기화되는지 확인한다.

## 전투 무결성
- 아군 해석 턴이 적 턴보다 먼저 실행된다.
- 체력/보호막 수치가 정상 범위에서 갱신된다.
- 승리/패배 전환이 데드엔드 없이 종료 루프로 연결된다.
- 크리티컬/피니시/전장 플래시 연출이 전투 진행을 방해하지 않는다.
- 일시정지 모달에서 `포기하고 메인`을 선택하면 즉시 로비로 복귀된다.
- 전투 종료 모달(챕터 클리어/게임 오버)에서 `메인으로` 선택 시 로비로 복귀된다.

## 기술 점검
- `node --check main.js` 통과.
- `assets/sound/bgm.mp3`가 첫 사용자 입력 이후 반복 재생되고, `BGM` 토글 버튼으로 즉시 ON/OFF 가능하다.
- 브라우저/모바일에서 실제 터치 동작은 수동 확인 필요.

## 고도화 1차 검증 기록
- 스타일 고도화 후 `844x390` 기준 전장/사이드/하단 입력 레이어 겹침 없음(코드 기준 점검).
- 연계/메타 UI 요소(`연계 pill`, `원정 메타`)가 기본 렌더 경로에 포함됨.
- 보상 카드 선택 강조, 릴 잠금 효과, 크리티컬/피니시 클래스 적용 경로 확인.

## 고도화 2차 검증 기록
- `턴 보너스` pill, 적 의도 배지, 보스 격노 클래스 렌더 경로 확인.
- 적 의도 실행 로직(단일/전체/방어/흡수)과 턴 종료 후 재롤 경로 확인.
- 룬 시너지 적용 시 턴 버프 초기화/재적용 순서가 라운드 흐름과 일치함.

## 고도화 3차 검증 기록
- 영웅별 궁극기 분기 로직(6종) 및 발동 조건(에너지 100) 경로 확인.
- 궁극기 전용 연출(트레일/임팩트/카드 강조) 클래스 적용 경로 확인.
- 부활 보상 적용 시 에너지 일부 복구(35%) 경로 확인.

## 고도화 4차 검증 기록
- 노드 계획(`전투 → 전투 → 정예 → 전투 → 휴식 → 전투 → 정예 → 전투 → 휴식 → 보스`)에 따라 상태 전환이 동작함.
- 휴식 노드 선택지(회복/복귀) 적용 후 전투 루프로 정상 복귀함.
- 정예 적 카드 클래스(`elite`) 및 정예 보너스 지급 경로 확인.

## 고도화 5차 검증 기록
- 유물 보상 생성/획득/리스트 반영 경로 확인.
- 유물 기반 상시 효과(피해 증폭/에너지 가속/시작 보호막) 적용 경로 확인.
- 상단 HUD 유물 수 표시와 전투 로그 유물 메시지 경로 확인.

## 고도화 6차 검증 기록
- 다크 네온 테마 적용 후 HUD/전장/모달/보상 카드 대비가 유지되는지 코드 기준 점검.
- 액센트 컬러(골드/핑크/청록/퍼플) 토큰이 주요 컴포넌트에 일관 반영되는지 확인.
- `main.js` 로그 뮤트 컬러가 다크 테마에서도 가독성 있는지 확인.

## 고도화 7차 검증 기록
- 보상 카드 등장 시 순차 `slideUp` 애니메이션과 선택 시 `glow`/`shimmer`가 정상 적용되는지 코드 경로 확인.
- 휴식 노드 카드도 동일한 선택 피드백(선택 강조 후 적용)으로 동작하도록 이벤트 흐름 확인.
- 모달 백드롭 블러/그라디언트와 스크롤바 다크 톤 스타일이 전장 레이어와 시각 충돌 없이 적용되는지 점검.

## UI 보완 검증 기록 (2026-02-18)
- 전투 로그를 축약형(시간/메시지 분리, 폰트 축소)으로 변경하고 로그 영역 높이를 고정해 전장과 레이아웃 충돌 가능성을 낮춤.
- 로그 기본 상태를 펼침으로 변경하고 `로그 보기/숨김` 토글 텍스트가 상태를 명확히 반영하는지 확인.
- 런 보드 4개 목록을 스크롤 리스트에서 아이콘 랙으로 변경해 좁은 영역에서도 정보가 한눈에 보이는지 코드 경로 기준 점검.

## 메타 고도화 검증 기록 (2026-02-18)
- 로비의 영웅 뽑기 화면에서 소환 비용/확률/최근 결과가 반영되는지 코드 경로 확인.
- 신규 영웅 소환 시 해금(`owned`) 처리, 중복 소환 시 조각 지급 처리, `localStorage` 저장 경로 확인.
- 영웅 성장 버튼이 요구 재화를 정확히 검사하고 성장 성공 시 스탯이 다음 런에 반영되는지 확인.
- 영웅 목록 화면의 출전 편성(장착/해제) 변경이 `meta.loadout`에 저장되고 다음 런 시작 파티에 반영되는지 점검.
- 영웅 상세 화면에서 패시브 3개(해금 조건 포함)가 보이고, 성장 시 잠금/해금 상태가 즉시 갱신되는지 확인.
- 영웅 상세 화면에서 장비 4슬롯(무기/투구/갑옷/장신구)이 노출되고 장착/교체/해제가 동작하는지 확인.
- 장비 뽑기(1회/10회) 결과가 최근 결과 목록에 누적되고 `localStorage`에 저장되는지 확인.
- 장착 장비 효과(공격/체력/치명/스핀 표식 확률)가 런 시작 후 실제 전투 수치에 반영되는지 확인.

## 성장 체계 개편 검증 기록 (2026-02-21)
- 영웅 성장 축이 `레벨업(Lv.1~10)` + `진화(0~5)`로 분리되어 저장(`meta.roster`)되는지 확인.
- 레벨업은 `유산 결정`만 소모하고, 진화는 `동일 영웅 조각`만 소모하도록 비용 경로가 분리됐는지 확인.
- 진화 스탯 보정이 레벨 보정보다 크게 적용되고, 영웅 상세 스탯 분해 문구(기본/직업/등급/레벨/진화/장비)가 일치하는지 확인.
- 패시브 해금 기준이 레벨이 아닌 진화 단계(`1/3/5`)로 동작하고, 전투 적용 패시브도 동일 기준으로 계산되는지 확인.

## 보스 상향 검증 기록 (2026-02-21)
- 보스 노드(`boss`)에서 보스 체력이 기존 산식 대비 2배로 생성되는지 확인.
- 보스 의도에 `말살 일격(강단일)`, `재앙 폭염(광역+화상)`, `응징 반격(반격 태세)`이 포함되는지 확인.
- 보스 화상 부여 시 아군 상태 아이콘/턴 감소/지속 피해가 정상 표시되는지 확인.
- 보스 반격 태세 중 피격 시 반격 피해 및 반격 화상 부여가 1회 소모 규칙으로 동작하는지 확인.

## 메인 편성 UX 개선 검증 기록 (2026-02-21)
- 메인 로비 중앙에 출전 영웅 아이콘 4칸(빈 슬롯 포함)이 표시되는지 확인.
- 슬롯 아이콘 탭 시 장착 팝업이 열리고, 슬롯별 영웅 교체/해제가 즉시 반영되는지 확인.
- 메인 로비 출전 아이콘에서 4.5~9초 주기로 랜덤 대사가 출력되고, 메인 외 화면(영웅 목록/뽑기/전투)에서는 중단되는지 확인.

## AI 이미지 파이프라인 검증 기록 (2026-02-18)
- `scripts/generate-google-assets.mjs`가 Google 이미지 API 호출 후 `assets/generated/*`에 파일을 저장하는지 확인.
- `assets/generated/assets-manifest.js`를 통해 프로토 런타임이 영웅/적/전장 이미지를 자동 로드하는 경로 확인.
- 매니페스트 누락/생성 실패 시 이모지 기반 기본 렌더링으로 폴백되는지 확인.

## 로비 UI 전환 검증 기록 (2026-02-18)
- 메인 로비(`lobbyLayer`)에서 챕터 선택, 영웅 목록 진입, 영웅 뽑기 진입 흐름이 분리되어 있는지 확인.
- 전투 UI는 로비 상태에서 숨김 처리되고, 챕터 시작 시 다시 표시되는지 코드 경로 확인.
- 영웅 목록에서 영웅 선택 시 상세 정보/레벨업/출전 장착-해제가 동작하는지 확인.
- 영웅 뽑기 1회/10회 결과가 최근 결과 리스트와 메타 데이터에 반영되는지 확인.

## 5회 고도화 검증 기록 (2026-02-19)
- 전장 오라/먼지 레이어, 유닛 아이들 모션, 타격 시 전장 흔들림이 전투 가독성을 해치지 않고 동작하는지 코드 경로 확인.
- 피해/회복/보호막 플로터 색상 분기(`damage/heal/shield`)가 이벤트 유형과 일치하는지 확인.
- 영웅 상세 화면에 고유 특성 블록이 표시되고, 특성 효과(시작 보호막/집중, 처형 보정 등)가 전투 로직에 반영되는지 확인.
- 스핀 표식 확장(`과충전 ▲`, `메아리 ∞`)이 릴 표시/행동 위력/추가 발동에 반영되는지 확인.
- 10스테이지 기준 밸런스 재조정(적 성장, 휴식 회복, 보상량) 후 진행 루프가 끊기지 않는지 확인.

## 3회 추가 고도화 검증 기록 (2026-02-19)
- 메인 로비 챕터 선택 UI에서 중앙 박스 제거/패널 투명화 후 배경 가림이 줄어드는지 확인.
- 보상 로직에서 런 내 동일 특성 중복 제어와 프리미엄 카드 강조 스타일이 정상 동작하는지 확인.
- 영웅 뽑기 `SR+ 보장` 로직(9회 누적 후 다음 뽑기 확정, 고등급 획득 시 카운트 리셋) 경로를 확인.

## 인게임 스킬 개편 검증 기록 (2026-02-20)
- 영웅별 잠재능력 3종(총 18종)이 데이터에 등록되고, 해당 영웅 생존 시에만 보상 후보로 등장하는지 확인.
- 잠재능력 획득 시 사이드 `특성` 아이콘과 영웅 상세 잠재능력 목록 상태가 일치하는지 확인.
- 잠재능력 전투 훅(일반공격/궁극기/피격/처치)이 전투 로그와 실제 피해/회복/상태이상에 반영되는지 확인.
- 킨 잠재 `삼연 속사` 획득 후 `x2` 표식 심볼이 3연속으로 해석되는지 확인.
- 브란 잠재 `최후의 불굴`이 전투당 1회만 발동하고, 발동 후 체력 1 + 보호막으로 생존하는지 확인.
